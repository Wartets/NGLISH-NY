!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="2f479c19-cb3a-4e16-97b3-27574e73c8c5",e._sentryDebugIdIdentifier="sentry-dbid-2f479c19-cb3a-4e16-97b3-27574e73c8c5")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"50a8b7c1868f7853b168d94079048a5f2193a776"},(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{c3jk:function(e,t,n){"use strict";n.r(t);var o,r=n("gcR/"),i=n.n(r),c=n("cDf5"),s=n.n(c),u=n("J4zp"),l=n.n(u),a=n("q1tI"),d=n.n(a),f=n("Gs79"),b=n("pCca"),g=n("NQ6n"),v=n("2PZ4"),p=n("U6jc"),h=n("Jqp9"),O=n("hKI/"),m=n.n(O),j=n("PgO9"),w=n("KG2r"),y=n("X6oL"),E=n("Ck0P"),T=n("taqW"),I=n("HUmG"),k=n("+g8y"),A=n("3sMT"),_=n("wXC7"),N=n.n(_),R=Object(h.css)("position:fixed;z-index:",N.a.zIndex.sectionOverlay-1,";right:20px;bottom:20px;opacity:1;transition:bottom 0.2s ease,opacity 0.1s linear;overflow:visible;"),x=function(e){var t=e.dockHeight;return Object(h.css)("bottom:",t+20,"px;")},C=Object(h.css)("opacity:0;visibility:hidden;"),S=Object(h.css)("border-radius:50%;border:1px solid ",A.color.stroke.quaternary,";background-color:rgba(255,255,255);position:static;display:block;cursor:pointer;"),B=Object(h.css)("border:1px solid ",A.dark.colors.content.primary.hex,";backdrop-filter:blur(10px);background:rgba(0,0,0,0.24);svg > path{fill:",A.dark.colors.stroke.primary.hex,";}"),M=0,H=1,G=2;function L(e){var t,n,r,c,u,O=e.asset,A=Object(y.useTracking)().trackEvent,_=Object(j.a)().user,N=Object(I.g)(_)&&Object(I.e)(_),L=Object(a.useRef)(!1),D=Object(a.useRef)(!1),Y=Object(a.useState)(!1),q=l()(Y,2),z=q[0],J=q[1],P=Object(a.useState)(!1),W=l()(P,2),F=W[0],K=W[1],U=Object(a.useState)(!0),X=l()(U,2),Q=X[0],Z=X[1],V=Object(a.useState)(!1),$=l()(V,2),ee=$[0],te=$[1],ne=Object(a.useState)(!1),oe=l()(ne,2),re=oe[0],ie=oe[1],ce=Object(a.useRef)(null),se=Object(f.a)().overlays,ue=Object(b.a)().deviceType,le=Object(a.useState)(0),ae=l()(le,2),de=ae[0],fe=ae[1],be=Object(a.useState)((null===(t=window)||void 0===t?void 0:t.NYT_ACTION_BAR_THEME)||{}),ge=l()(be,2),ve=ge[0],pe=ge[1],he=Object(a.useRef)(),Oe=Object(a.useRef)(new Set([])),me=Object(a.useRef)(new Set([])),je=Object(a.useRef)(new Set([])),we=Object(a.useRef)(null),ye=Object(a.useRef)(null),Ee=Object(a.useState)(M),Te=l()(Ee,2),Ie=Te[0],ke=Te[1],Ae=(null==ve?void 0:ve.disableTest)||(null==ve?void 0:ve.disableFloating),_e=O.uri,Ne=O.url,Re=_e.startsWith("nyt://interactive"),xe=Re&&Ne.includes("/elections/"),Ce=function(e){var t;null!=e&&e.detail&&!Number.isNaN(null===(t=e.detail)||void 0===t?void 0:t.dockHeight)&&fe(e.detail.dockHeight)},Se=function(e){e.forEach((function(e){e.isIntersecting?(Oe.current.add(e.target),me.current.add(e.boundingClientRect)):e.isIntersecting||Oe.current.delete(e.target)}))},Be=function(){window.NYT_ACTION_BAR_THEME&&pe(window.NYT_ACTION_BAR_THEME)};Object(a.useEffect)((function(){if(Ae)return function(){};he.current=new IntersectionObserver(Se);var e=m()((function(){if(Oe.current.size>0){var e=[],t=new IntersectionObserver((function(t,n){if(t.forEach((function(t){e.push(t.boundingClientRect)})),we.current){var o=we.current.getBoundingClientRect();if(0===o.width&&0===o.height||(ye.current=o),0===ye.current.width||0===ye.current.height)return;var r={top:ye.current.top-20,bottom:ye.current.bottom+20,left:ye.current.left,right:ye.current.right},i=!1;e.forEach((function(e){var t,n;t=r,(n=e).left>=t.right||n.right<=t.left||n.top>=t.bottom||n.bottom<=t.top||(i=!0)})),K(i),J(i)}n.disconnect()}));Oe.current.forEach((function(e){t.observe(e)}))}else K(!1)}),100);return document.addEventListener("scroll",e),Object(p.handleAdDefined)("all",(function(e){if("object"===s()(e)&&"string"==typeof e.id){var t=document.getElementById(null==e?void 0:e.id);t&&(t instanceof HTMLElement||t instanceof Node)&&he.current.observe(t)}})),Be(),window.addEventListener("dockInfo",Ce),Re&&window.addEventListener("NYT_ACTION_BAR_THEME",Be),function(){document.removeEventListener("scroll",e),window.removeEventListener("dockInfo",Ce),Re&&window.removeEventListener("NYT_ACTION_BAR_THEME",Be)}}),[Ae,Re]),Object(a.useEffect)((function(){if(!Ae&&Re&&(document.querySelectorAll('[data-testid="share-tools"]').length<=1&&!1===D.current||xe)){D.current=!0;var e=document.createElement("div");e.id="fab-observer",Object.assign(e.style,{position:"absolute",top:"200vh",left:0,width:"1px",height:"1px"}),document.body.appendChild(e);var t=new IntersectionObserver((function(n){n.forEach((function(n){n.isIntersecting&&(te(!0),t.disconnect(),document.body.removeChild(e))}))}));t.observe(e)}}),[Ae,Re,xe]),Object(a.useEffect)((function(){if(Ae)return function(){};var e=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting?(je.current.add(e.target),te(!0)):je.current.delete(e.target)})),je.current.size>0?(Z(!0),J(!0),clearTimeout(ce.current),ce.current=setTimeout((function(){J(!1)}),100)):Z(!1)}),{}),t="#interactive-standalone-sharetools, #NYT_BELOW_MAIN_CONTENT_REGION, #bottom-sheet-sensor, #site-index, #story h1, #story #article-summary";return xe||(t="".concat(t,', [data-testid="share-tools"], #standalone-footer')),document.querySelectorAll(t).forEach((function(t){e.observe(t)})),function(){e.disconnect()}}),[Ae,ee,xe]);var Me=!(!F&&!Q&&ee);if(Object(a.useEffect)((function(){Me||!1!==L.current||Ae||(A({event:"impression",module:{region:"floating-button",name:"share-tools"}}),L.current=!0)}),[Me,A,Ae]),Ae)return null;if(null!=se&&null!==(n=se.bottomsheet)&&void 0!==n&&n.visible||(null!=se&&null!==(r=se.onetap)&&void 0!==r&&r.visible||null!=se&&null!==(c=se.extendedAccess)&&void 0!==c&&c.visible)&&"smartphone"===ue)return null;var He=function(e){e&&(ke(H),setTimeout((function(){ke(G)}),200))},Ge=null;Ie===M?Ge=i()(w.b,{share:O,pageType:"Article",toggleGiftArticleMenu:He,trackingRegion:"floating-button",renderGiftButton:N}):Ie===H?Ge=o||(o=i()(T.a,{fixed:!1})):Ie===G&&(Ge=i()(E.a,{share:O,pageType:"Article",trackingRegion:"floating-button",renderGiftButton:!0,toggleGiftArticleMenu:He}));var Le=N&&Ie===M;return d.a.createElement("div",{className:Object(h.cx)(R,de?x({dockHeight:de}):null,Me?C:null),ref:we,"data-testid":"floating-button"},i()(g.b,{buttonContent:i()(v.b,{className:Object(h.cx)(k.j,k.d)}),pageType:"Article",share:O,handleOpen:function(e){e?(ie(e),e&&re!==e&&A({event:"moduleInteraction",eventData:{pagetype:"Article",trigger:"module",type:"click"},module:{name:"share-tools",region:"floating-button",element:{name:"tools-menu",label:"Tools Menu",url:O.url}}}),!1===e&&ke(M)):ie(e)},toggleGiftArticleMenu:He,forceCloseModal:z,className:Object(h.cx)(S,null!=ve&&null!==(u=ve.actionBarTheme)&&void 0!==u&&u.includes("dark")?B:null),hasGiftArticleButtonSibling:Le,trackingRegion:"floating-button",modalContent:Ge}))}L.displayName="FABActual";t.default=L}}]);
//# sourceMappingURL=fabActual-0c8720b9857d1b30bb4f.js.map